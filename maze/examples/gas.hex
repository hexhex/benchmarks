start(krems).
end(wien).

% if the tour is longer than our limit, then we need more fuel
needFuel :- &pathLongerThan[path, 50]().

% in this case we choose a gas station
chooseGas(G) v nchooseGas(G) :- needFuel, gasstation(G).
:- needFuel, chooseGas(G1), chooseGas(G2), G1 != G2.
chosen :- needFuel, chooseGas(G).
:- needFuel, not chosen.

% plan a tour which involves the gas station
path(X, Y, C) :- needFuel, start(S), chooseGas(G), &path[map, S, G](X, Y, C).
path(X, Y, C) :- needFuel, end(E), chooseGas(G), &path[map, G, E](X, Y, C).

% otherwise plan a tour without gas station
path(X, Y, C) :- not needFuel, start(S), end(E), &path[map, S, E](X, Y, C).
